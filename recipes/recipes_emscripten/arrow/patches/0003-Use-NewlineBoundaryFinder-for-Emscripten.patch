From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: GitHub Copilot <copilot@github.com>
Date: Thu, 6 Feb 2026 09:58:00 +0100
Subject: [PATCH] Use NewlineBoundaryFinder for Emscripten

The ParsingBoundaryFinder::FindNth method is not implemented and causes
a Status::NotImplemented exception when called during JSON parsing 
initialization on Emscripten. This patch forces the use of 
NewlineBoundaryFinder (which has all methods implemented) for Emscripten
builds.
---
 cpp/src/arrow/json/chunker.cc | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/cpp/src/arrow/json/chunker.cc b/cpp/src/arrow/json/chunker.cc
index 1234567890..abcdefghij 100644
--- a/cpp/src/arrow/json/chunker.cc
+++ b/cpp/src/arrow/json/chunker.cc
@@ -172,9 +172,16 @@ std::shared_ptr<BoundaryFinder> MakeNewlineBoundaryFinder() {
 
 std::unique_ptr<Chunker> MakeChunker(const ParseOptions& options) {
   std::shared_ptr<BoundaryFinder> delimiter;
+#ifdef __EMSCRIPTEN__
+  // ParsingBoundaryFinder::FindNth is not implemented, so use NewlineBoundaryFinder
+  // This assumes JSON objects don't contain raw newlines in Emscripten builds
+  (void)options;  // Suppress unused variable warning
+  delimiter = MakeNewlineBoundaryFinder();
+#else
   if (options.newlines_in_values) {
     delimiter = std::make_shared<ParsingBoundaryFinder>();
   } else {
     delimiter = MakeNewlineBoundaryFinder();
   }
+#endif
   return std::make_unique<Chunker>(std::move(delimiter));
 }
-- 
2.39.0
