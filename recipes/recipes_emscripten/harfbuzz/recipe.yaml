context:
  name: harfbuzz
  version: 10.1.0

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/${{ name }}/${{ name }}/archive/${{ version }}.tar.gz
  sha256: c758fdce8587641b00403ee0df2cd5d30cbea7803d43c65fddd76224f7b49b88

build:
  number: 1

requirements:
  build:
  # NOTE: harfbuzz doesn't need host dependencies
  # as it only uses the library headers and doesn't
  # link with them directly.
  - ${{ compiler('c') }}
  - ${{ compiler('cxx') }}
  - meson
  - ninja
  - pkg-config
  - cairo >=1.18
  - glib
  - freetype
  - icu
  - graphite2

tests:
- script:
  - test -f $PREFIX/lib/libharfbuzz-gobject.a
  - test -f $PREFIX/lib/libharfbuzz-cairo.a
  - test -f $PREFIX/lib/libharfbuzz-icu.a
  - test -f $PREFIX/lib/libharfbuzz-subset.a
  - test -f $PREFIX/lib/libharfbuzz.a
  - test -f $PREFIX/include/harfbuzz/hb.h
  - test -f $PREFIX/include/harfbuzz/hb-shape.h
  - test -f $PREFIX/include/harfbuzz/hb-subset.h
# TODO: test hb-view with chafa enabled

about:
  homepage: https://harfbuzz.github.io/
  license: MIT
  license_file: COPYING
  summary: An OpenType text shaping engine.
  description: |
    HarfBuzz is a text shaping library. New Harbuzz targets various font
    technologies while Old HarfBuzz targets only OpenType fonts.
  documentation: https://harfbuzz.github.io/

extra:
  recipe-maintainers:
  - IsabelParedes
