context:
  name: libarchive
  version: 3.8.4

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/${{ name }}/${{ name }}/archive/v${{ version }}.tar.gz
  sha256: e67100e84e95019907f8c616e3382a92f37e3389e4a8e447a1d50ea5b8e30868

build:
  number: 0

requirements:
  build:
  - ${{ compiler('c') }}
  - autoconf
  - automake
  - libtool
  - pkg-config
  host:
  - bzip2
  - zlib
  - zstd
  - libxml2

tests:
- script:
  - node $PREFIX/bin/bsdtar --version
  requirements:
    build:
    - nodejs
- package_contents:
    files:
    - bin/bsdcat.wasm
    - bin/bsdcpio.wasm
    - bin/bsdtar.wasm
    - bin/bsdunzip.wasm
    - include/archive.h
    - lib/libarchive.a

about:
  homepage: http://www.libarchive.org/
  license: BSD-2-Clause
  license_file: COPYING
  license_family: BSD
  summary: Multi-format archive and compression library
  description: |
    The libarchive project develops a portable, efficient C library that can
    read and write streaming archives in a variety of formats. It also includes
    implementations of the common tar, cpio, and zcat command-line tools that
    use the libarchive library.
  repository: https://github.com/libarchive/libarchive

extra:
  recipe-maintainers:
  - IsabelParedes
  - AnastasiaSliusar
