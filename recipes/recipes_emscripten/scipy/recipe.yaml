context:
  name: scipy
  version: 1.16.1

package:
  name: ${{ name }}
  version: ${{ version }}

source:
- url: https://pypi.org/packages/source/s/scipy/scipy-${{ version }}.tar.gz
  sha256: 44c76f9e8b6e8e488a586190ab38016e4ed2f8a038af7cd3defa903c0a2238b3
  patches:
  # Patches for subprojects
  - patches/0001-Disable-threads.patch
  - patches/0002-Dont-import-numpy-f2py-in-tests.patch
  # Branch containing following patches is v1.16.0-emforge at https://github.com/ianthomas23/scipy
  # Use `git format-patch v1.16.0...v1.16.0-emforge --start-number 3` to create patch files.
  - patches/0003-Remove-duplicate-symbol.patch
  - patches/0004-Set-fortran-linker-to-emcc.patch
  - patches/0005-Replace-dtype-with-numpy-int32.patch
  - patches/0006-Remove-unsupported-version-script.patch
  - patches/0007-Remove-chla_transtype.patch
  - patches/0008-Extra-char-length-arguments-in-linalg-cython-wrapper.patch
  - patches/0009-Change-return-and-char-length-args-in-dsolve.patch
  - patches/0010-Change-return-and-char-length-args-in-optimize.patch
  - patches/0011-int-return-for-superlu_utils-and-input_error.patch
  - patches/0012-Extra-char-length-args-to-f2py-source-files.patch
  - patches/0013-Change-arg-type-in-odepack.patch
  - patches/0014-Extra-char-length-args-in-_common_array_utils.patch
  - patches/0015-Disable-unsupported-ffloat-store.patch

build:
  number: 0

  files:
    exclude:
    - '**/*.pyi'
    - '**/tests/**'
    - '**/__pycache__/**'
    - '**/*.pyc'
    - '**/test_*.py'
  python:
    skip_pyc_compilation:
    - '**/*.py'
requirements:
  build:
  - ${{ compiler('c') }}
  - ${{ compiler('cxx') }}
  - python
  - cross-python_${{ target_platform }}
  - cython
    # - llvm_${{ target_platform }} # Installing custom LLVM in build.sh
  - meson-python
  - numpy
  - pkg-config
  host:
  - numpy
  - openblas
  - pybind11
  - python
  run:
  - python
  - numpy
  - openblas

tests:
- dummy-to-avoiding-linting-error:
#- script: pytester
#  files:
#    recipe:
#    - test_scipy.py
#  requirements:
#    build:
#    - pytester
#    run:
#    - pytester-run

about:
  homepage: http://www.scipy.org/
  license: BSD-3-Clause
  license_file: LICENSE.txt
  summary: Scientific Library for Python
  description: |
    SciPy is a Python-based ecosystem of open-source software for mathematics,
    science, and engineering.

extra:
  maintainers:
  - ianthomas23
