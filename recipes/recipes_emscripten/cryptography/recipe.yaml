context:
  name: cryptography
  version: 46.0.3

package:
  name: cryptography
  version: ${{ version }}

source:
- url: https://pypi.io/packages/source/${{ name[0] }}/${{ name }}/${{ name }}-${{ version }}.tar.gz
  sha256: a8b17438104fed022ce745b362294d9ce35b4c2e45c1d958ad4a4b019285f4a1

build:
  number: 0
  script:
  - export RUSTFLAGS="$RUSTFLAGS --verbose"
  - $PYTHON -m pip install . -vvv $PIP_ARGS

requirements:
  build:
    - ${{ compiler('cxx') }}
    - cross-python_${{ target_platform }}
    - cffi
    - openssl
    - maturin
    - rust-nightly
  host:
    - python
    - openssl
    - cffi
  run:
    - cffi

tests:
  - script: pytester
    requirements:
      build:
        - pytester
      run:
        - pytester-run
    files:
      recipe:
        - test_import_cryptography.py

about:
  homepage: https://cryptography.io
  license: Apache-2.0 AND BSD-3-Clause AND PSF-2.0 AND MIT
  license_family: BSD
  license_file: LICENSE
