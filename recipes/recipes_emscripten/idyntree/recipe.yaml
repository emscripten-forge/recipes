context:
  version: 8.0.0

package:
  name: idyntree
  version: '{{ version }}'

source:
  url: https://github.com/robotology/idyntree/archive/refs/tags/v{{ version }}.tar.gz
  sha256: cd33325f15a65cd818a34f85b2c900d20624dedd31fea5beeeb001bb80a1c933
  patches:
    # Workaround for https://github.com/emscripten-forge/recipes/issues/204
    - sel(emscripten): libxml2_pc_fix.patch

build:
  number: 0

requirements:
  build:
    - '{{ compiler("c") }}'
    - '{{ compiler("cxx") }}'
    - cmake
    - ninja
    - pkg-config
    - swig

  host:
    - libxml
    - eigen
    - pip
    - python
    - numpy

  run:
    - python
    - numpy

test:
  commands:
    - sel(emscripten): test -d ${PREFIX}/include/iDynTree

about:
  home: https://github.com/robotology/idyntree
  license: LGPL-2.1-or-later
  license_file: LICENSE.LGPL2
  summary: Multibody Dynamics Library designed for Free Floating Robots.

extra:
  recipe-maintainers:
    - traversaro
  emscripten_tests:
    python:
      pytest_files:
      - test_import_idyntree.py

