diff --git a/clang/lib/Interpreter/Wasm.cpp b/clang/lib/Interpreter/Wasm.cpp
index 1001410aa0f2..fe9222b2658c 100644
--- a/clang/lib/Interpreter/Wasm.cpp
+++ b/clang/lib/Interpreter/Wasm.cpp
@@ -79,6 +79,8 @@ llvm::Error WasmIncrementalExecutor::addModule(PartialTranslationUnit &PTU) {
                                           "--experimental-pic",
                                           "--no-export-dynamic",
                                           "--stack-first",
+                                          "--allow-undefined",
+                                          "--import-function=printf",
                                           OutputFileName.c_str(),
                                           "-o",
                                           OutputFileName.c_str()};
