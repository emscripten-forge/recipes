context:
  name: numcodecs
  version: '0.12.0'

package:
  name: numcodecs
  version: '{{ version }}'

source:
  - url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
    sha256: 6388e5f4e94d18a7165fbd1c9d3637673b74157cff8bc644005f9e2a4c717d6e
    patches:
      - patches/fixblosc.patch
      - patches/fixsetup.patch
      - patches/fixzlib.patch
  - path: setup.py

build:
  number: 0

requirements:
  build:
    - '{{ compiler("c") }}'
    - cross-python_emscripten-32
    - cython
    - python
    - pip
    - setuptools_scm
  host:
    - python
  run:
    - numpy
    - msgpack

extra:
  emscripten_tests:
    python:
      pytest_files:
        - test_import_numcodecs.py
