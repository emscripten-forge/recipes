context:
  name: numcodecs
  version: '0.11.0'

package:
  name: numcodecs
  version: '{{ version }}'

source:
  - url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
    sha256: 6c058b321de84a1729299b0eae4d652b2e48ea1ca7f9df0da65cb13470e635eb
    patches:
      - patches/fixblosc.patch
      - patches/fixsetup.patch
      - patches/fixzlib.patch
  - path: setup.py

build:
  number: 0

requirements:
  build:
    - '{{ compiler("c") }}'
    - cross-python_emscripten-32
    - cython
    - python
    - pip
    - setuptools_scm
  host:
    - python
  run:
    - numpy
    - msgpack

extra:
  emscripten_tests:
    python:
      pytest_files:
        - test_import_numcodecs.py
