context:
  name: libgdal-core
  version: 3.12.2

source:
  url: https://github.com/OSGeo/gdal/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 1817fa4bd60a98ed4bff06f369a352d994332e63a48be5c15bcee44680fa5ace
  patches:
  - patches/0001-Add-CPL_CPUID-guards.patch

build:
  number: 0

outputs:
- package:
    name: ${{ name }}
    version: ${{ version }}
  build:
    script: build.sh
  requirements:
    build:
    - ${{ compiler('c') }}
    - cmake
    - pkg-config
    host:
    - libtiff
    - proj-static
    - libiconv
    - geos-static
    - libpng
  tests:
  - package_contents:
      files:
      - lib/libgdal.so

- package:
    name: ${{ name }}-static
    version: ${{ version }}
  build:
    script: build_static.sh
  requirements:
    build:
    - ${{ compiler('c') }}
    - cmake
    - pkg-config
    host:
    - libtiff
    - proj-static
    - libiconv
    - geos-static
    - libpng

about:
  homepage: https://gdal.org/
  license: MIT
  license_file: LICENSE.TXT

extra:
  recipe-maintainers:
  - DerThorsten
  - IsabelParedes
