context:
  version: 2.3.0
  name: whiteboxgui

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/w/${{ name }}/${{ name }}-${{ version }}.tar.gz
  sha256: c59dfccb244bc2d7b9ff77c63a81b77d0e1b4a6fc19476449e450e0da009a754

build:
  number: 0
  script: $PYTHON -m pip install . -vv

requirements:
  build:
    - python
    - crossenv >=1.2
    - cross-python_emscripten-wasm32
    - ${{ compiler("c") }}
    - pip
  host:
    - python
  run:
    - python
    - ipyfilechooser
    - ipytree
    - ipywidgets
    - whitebox
    - setuptools<82
    - platformdirs
    - jaraco.text
    # - xorg-libx11

tests:
- package_contents:
    files:
    - lib/python*/site-packages/whiteboxgui/*.py

# NOTE: importing whiteboxgui fails because whitebox does not support emscripten.
# See https://github.com/opengeos/whitebox-python/blob/1fcd8d2ca5c454b828e4ff2f05fea16a2432baed/whitebox/download_wbt.py#L40-L46


about:
  homepage: https://github.com/giswqs/whiteboxgui
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: An interactive GUI for WhiteboxTools in a Jupyter-based environment

extra:
  recipe-maintainers:
  - martinRenou
