context:
  version: 0.3.27
  name: openblas

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  sha256: aa2d68b1564fe2b13bc292672608e9cdeeeb6dc34995512e65c3b10f4599e897
  url: https://github.com/OpenMathLib/OpenBLAS/releases/download/v${{ version }}/OpenBLAS-${{ version }}.tar.gz
  patches:
  - patches/0001-Add-Wno-return-type-flag.patch
  - patches/0002-Align-xerbla_array-signature-with-scipy-expectation.patch
  - patches/0003-Skip-linktest.patch

build:
  number: 0

requirements:
  build:
  - ${{ compiler('c') }}
  host:
  - libf2c

tests:
- package_contents:
    lib:
    - libopenblas.so
    include:
    - cblas.h
    - lapack.h

extra:
  recipe-maintainers:
  - DerThorsten

about:
  homepage: http://www.openblas.net/
  license: BSD-3-Clause
  license_file:
  - LICENSE
  - lapack-netlib/LICENSE
