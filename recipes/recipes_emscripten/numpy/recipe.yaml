context:
  version: '1.24.0'
  cross_target_plattform: emscripten-32
  target_plattform: emscripten-32

package:
  name: numpy
  version:  '{{ version }}'
source:
  url: https://github.com/numpy/numpy/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 58868ea9d07ed9394106b343ef0156c74e5aecbb9ea5bd01dbffbfcf471dc768
  # path: /home/derthorsten/src/numpy
  # sha256: e6c76a87633aa3fa16614b61ccedfae45b91df2767cf097aa9c933932a7ed1e0
  # url: https://files.pythonhosted.org/packages/fb/48/b0708ebd7718a8933f0d3937513ef8ef2f4f04529f1f66ca86d873043921/numpy-1.21.4.zip
  patches:
    - patches/0001-ENH-Add-support-for-platforms-with-missing-fenv-flag.patch
    - patches/0002-ENH-Fix-pointer-size-determination-for-cross-build.patch
    - patches/0003-BUG-Fix-datetime_to_timedelta_resolve_descriptors-signature.patch
build:
  number: 0

requirements:
  build:
    - '{{ compiler("c") }}'
    - cross-python_emscripten-32
    - python
    - cython
    - setuptools <60.0
    - pip
  host:
    - python
  run:
    - python

about:
  home: http://numpy.org/
  license: BSD-3-Clause
  license_file: LICENSE.txt
  summary: The fundamental package for scientific computing with Python.
  doc_url: https://numpy.org/doc/stable/reference/
  dev_url: https://github.com/numpy/numpy

extra:
  emscripten_tests:
    python:
      pytest_files:
        - test_numpy.py

  recipe-maintainers:
    - DerThorsten

