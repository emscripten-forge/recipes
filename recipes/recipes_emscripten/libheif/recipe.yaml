context:
  name: libheif
  version: 1.21.1

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/strukturag/libheif/releases/download/v${{ version }}/libheif-${{ version }}.tar.gz
  sha256: 9799b4b1c19006f052bcf399c761cc147e279762683cefaf16871dbb9b4ea2a1

build:
  number: 0

requirements:
  build:
  - ${{ compiler('c') }}
  - ${{ compiler('cxx') }}
  - cmake
  - ninja
  - pkg-config
  host:
  - zlib
  - libtiff
  - libpng

tests:
- package_contents:
    files:
    - include/libheif/heif.h
    - lib/libheif.a

about:
  license: LGPL-3.0-or-later
  license_file: COPYING
  summary: ISO/IEC 23008-12:2017 HEIF and AVIF file format decoder and encoder
  description: |
    libheif is an ISO/IEC 23008-12:2017 HEIF and AVIF (AV1 Image File Format) file format decoder and encoder.
    HEIF and AVIF are new image file formats employing HEVC (H.265) or AV1 image coding, respectively, for the
    best compression ratios currently possible.
  homepage: https://github.com/strukturag/libheif

extra:
  recipe-maintainers:
  - emscripten-forge
