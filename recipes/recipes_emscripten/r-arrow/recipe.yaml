context:
  name: r-arrow
  version: 23.0.1

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url:
  - https://github.com/apache/arrow/archive/refs/tags/apache-arrow-${{ version }}.tar.gz
  sha256: 9a9a057bba3aa7080abc2ba8e7a079effa74626a4f308ac56bfce035d31ef1ac
  patches:
  - patches/0001-Add-parquet-variable.patch

build:
  number: 0
  script: cd r && $R CMD INSTALL $R_ARGS .

  files:
    exclude:
    - '**/__pycache__/**'
    - '**/*.pyc'
  python:
    skip_pyc_compilation:
    - '**/*.py'
requirements:
  build:
  - cross-r-base_${{ target_platform }}
  - ${{ compiler('c') }}
  - pkg-config
  - r-assertthat
  - r-bit64
  - r-cpp11
  - r-glue
  - r-purrr
  - r-r6
  - r-rlang
  - r-tidyselect
  - r-vctrs
  host:
  - arrow-cpp
  - r-assertthat
  - r-bit64
  - r-cpp11
  - r-glue
  - r-purrr
  - r-r6
  - r-rlang
  - r-tidyselect
  - r-vctrs
  run:
  - r-assertthat
  - r-bit64
  - r-cpp11
  - r-glue
  - r-purrr
  - r-r6
  - r-rlang
  - r-tidyselect
  - r-vctrs

tests:
- package_contents:
    lib:
    - R/library/${{ name[2:] }}/libs/${{ name[2:] }}.so

about:
  homepage: https://github.com/apache/arrow
  license: Apache-2.0
  license_file: LICENSE.txt
  summary: R Integration to Apache Arrow.
  license_family: APACHE

extra:
  recipe-maintainers:
  - IsabelParedes
