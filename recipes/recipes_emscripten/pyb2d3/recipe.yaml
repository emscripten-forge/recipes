context:
  version: 0.6.0
  name: pyb2d3

source:
- url: https://github.com/DerThorsten/pyb2d3/archive/refs/tags/v${{version}}.tar.gz
  sha256: a9755262c2ebf02936395a0f6f1944fc805626da86b6dd5cc96de087637872d2

build:
  number: 0

outputs:
  - package:
      name: pyb2d3
      version: ${{ version }}

    build:
      script: build_pkg.sh

    requirements:
      build:
      - ${{ compiler("cxx") }}
      - cross-python_emscripten-wasm32
      - cmake>=4.0
      - ninja
      - numpy
      - nanobind
      - scikit-build-core
      - python
      - pip
      host:
      - python
      - numpy
      - box2d-static >=3.1.1

      run:
      - numpy
      - python

    tests:
      - script: pytester
        files:
          recipe:
          - test_pyb2d3.py
        requirements:
          build:
          - pytester
          run:
          - pytester-run

  - package:
      name: pyb2d3-sandbox
      version: ${{ version }}
    build:
      noarch: python
      script:
      - ${PYTHON} -m pip install companion_packages/pyb2d3_sandbox -vv --prefix ${PREFIX}
    requirements:
      build:
      - ${{ compiler("cxx") }}
      - cross-python_emscripten-wasm32
      - python
      - pip
      host:
      - python
      run:
      - pyb2d3 >=${{ version }}

  - package:
      name: pyb2d3-sandbox-ipycanvas
      version: ${{ version }}
    build:
      noarch: python
      script:
      - ${PYTHON} -m pip install companion_packages/pyb2d3_sandbox_ipycanvas -vv --prefix ${PREFIX}
    requirements:
      build:
      - ${{ compiler("cxx") }}
      - cross-python_emscripten-wasm32
      - python
      - pip
      host:
      - python
      run:
      - ipycanvas >=0.14.1
      - pyb2d3 >=${{ version }}
      - pyb2d3-sandbox >=${{ version }}


about:
  license: MIT
  license_file: LICENSE
  summary: python bindings for box2d v3, a 2D physics engine
  homepage: https://github.com/DerThorsten/pyb2d3

extra:
  recipe-maintainers:
  - DerThorsten

